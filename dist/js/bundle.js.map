{"version":3,"sources":["webpack://gukhan-kiwi-skin/./src/js/main.js"],"names":["indicesUrl","pagesUrl","pageExtension","url","URL","location","href","window","addEventListener","console","log","pathname","displaySearchResult","gotoResult","document","querySelector","searchResult","searchString","decodeURIComponent","searchParams","get","goto","innerHTML","search","data","word","pages","entry","title","pageUrl","surrounding","index","indexOf","substring","length","div","createElement","classList","add","appendChild","callback","request","XMLHttpRequest","onreadystatechange","readyState","DONE","status","open","send","JSON","parse","responseText","replace"],"mappings":"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","file":"bundle.js","sourcesContent":["\nvar indicesUrl = \"{{ site.baseUrl }}{{ site.path.indices }}\"\nvar pagesUrl = \"{{ site.baseUrl }}{{ site.path.pages }}\"\nvar pageExtension = \"{{ site.extension.page }}\"\n\nconst url = new URL(location.href)\n\nwindow.addEventListener('load', () => {\n    console.log(url.pathname)\n    if(url.pathname == '/search.html') displaySearchResult()\n})\n\nconst displaySearchResult = () => {\n    var gotoResult = document.querySelector('#goto-result');\n    var searchResult = document.querySelector('#search-result');\n    var searchString = decodeURIComponent(url.searchParams.get('search') || '');\n    goto(searchString, function(url) {\n        gotoResult.innerHTML = '<h2>文書名 一致: <a href=\"' + url + '\">' + searchString + '</a><h2>';\n    })\n    search(searchString, function(data) {\n        var word = data.word;\n        for(entry of data.pages) {\n            var title = entry.title\n            var url = pageUrl(title);\n            var surrounding = entry.surrounding;\n\n            var index = surrounding.indexOf(word);\n            surrounding =\n                    surrounding.substring(0, index)\n                    + '<span class=\"bold\">'\n                    + word\n                    + '</span>'\n                    + surrounding.substring(index + word.length);\n            \n            var div = document.createElement('div');\n            div.classList.add('result-entry')\n            div.innerHTML =\n                    '<h3 class=\"title\">'\n                    + '<a href=\"' + url + '\">'\n                    + title + '</a></h3>'\n                    + '<p class=\"surrounding\">'\n                    + surrounding + '</p>'\n            searchResult.appendChild(div);\n        }\n    });\n}\n\nfunction goto(searchString, callback) {\n    var url = pageUrl(searchString)\n    var request = new XMLHttpRequest()\n    request.onreadystatechange = function() {\n        if(request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            callback(url)\n        }\n    }\n    request.open(\"GET\", url)\n    request.send(null)\n}\n\nfunction search(searchString, callback) {\n    var request = new XMLHttpRequest()\n    request.onreadystatechange = function() {\n        if(request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            var data = JSON.parse(request.responseText)\n            callback(data)\n        }\n    }\n    request.open(\"GET\", indicesUrl + '/' + searchString + '.json')\n    request.send(null)\n}\n\nfunction pageUrl(title) {\n    return pagesUrl + '/' + title.replace(/ /g, '_') + pageExtension\n}\n"],"sourceRoot":""}